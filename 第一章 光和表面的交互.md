# 一、光合表面的交互
计算机图形学：模拟光和物体表面交互的光学原理

渲染过程中的两个难点：物体表面的半球积分运算、光线与整个场景的最近相交位置。

解决问题的两类方式：
- 基于有限元分解的辐射度理论、基于蒙特卡洛积分的光线追踪技术。
- 拆分渲染方程

有限元方法：将无限维的空间分解为有限维度的的积分，通过求出每个有限元的均值计算积分。

蒙特卡洛方法：使用随机采样，使用抽样近似计算积分方程的值。

![快速的光照计算渲染场景的方法](/pic/快速的光照计算渲染场景分类.png)

1.1 什么是全局光照

全局光照模型和局部光照：仅考虑光从光源出发，经过表面一次反射或折射后到达人眼，这种不考虑非光源表面对着色的影响的光照模型称为局部光照模型。相反称为全局光照模型。

全局光照包含的内容：阴影、环境遮挡、反射、间接光照、焦散、散射。

阴影：硬阴影只记录物体的边缘的信息，软阴影通常由面光源产生。

环境遮挡：通常没有办法使用光栅化的方式生成，AO 包含静态 AO 和动态 AO。静态 AO 通常使用 AO 贴图实现。动态 AO 通常使用 SSAO 和距离场加速 AO 计算。

反射：通常会使用环境贴图实现。

间接光照：最重要全局光照效果，计算特别昂贵。其设计渲染方程针对整个半球空间的积分计算。半球空间的积分和 AO 的计算方式类似，所以计算间接光照的时候会同时把 AO 计算了，例如Unreal Engine 4 中的光追追踪的 GI 的实现，以及 SSGI [(SSGI shader 实现)](https://github.com/EpicGames/UnrealEngine/blob/release/Engine/Shaders/Private/SSRT/SSRTDiffuseIndirect.usf) 的实现都是同时计算 AO 和间接光照。静态的场景通常使用光照贴图实现间接漫反射。动态场景使用光照探针。

焦散：渲染尤其困难，因为形成焦散的光线采样率极低。

散射：次表面散射，人体的皮肤的渲染通常需要使用到的技术。

